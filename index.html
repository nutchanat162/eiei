<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Eieiei</title>
  <style>
    /* --- Fonts (optional, will fallback if blocked) --- */
    @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&family=Itim&display=swap');

    :root{
      --bg1:#ffd1dc;   /* baby pink */
      --bg2:#c6e6ff;   /* soft blue */
      --ink:#2b2b2b;
      --soft:#ffffffaa;
      --card:#fff2f6;
      --accent:#ff6fa9;
      --accent-2:#8f7bff;
      --ok:#42c591;
      --bad:#ff5c7a;
      --shadow:0 10px 25px rgba(0,0,0,.15);
      --radius:22px;
    }

    * { box-sizing: border-box }
    html, body { height: 100% }
    body{
      margin:0;
      color:var(--ink);
      font-family: 'Itim', 'Kanit', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* Floating soft hearts background */
    .bg-hearts{ position:fixed; inset:0; pointer-events:none; overflow:hidden; }
    .bg-hearts span{
      position:absolute; bottom:-60px; font-size:18px; opacity:.7; filter:drop-shadow(0 2px 4px rgba(0,0,0,.12));
      animation: floatUp linear forwards;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) scale(.8) rotate(0deg); opacity:.0 }
      50%{ opacity:.8 }
      to{ transform: translateY(-110vh) scale(1.2) rotate(15deg); opacity:0 }
    }

    /* Container */
    .wrap{ min-height:100dvh; display:grid; place-items:center; padding:28px }

    .card{
      width:min(720px, 96vw);
      background: linear-gradient(180deg, var(--card), #fff);
      border-radius: var(--radius);
      padding: 26px 22px;
      box-shadow: var(--shadow);
      border: 2px solid #ffe0ea;
      backdrop-filter: blur(6px);
    }

    .title{ display:flex; align-items:center; gap:12px; justify-content:center; margin:4px 0 14px }
    .title .heart{
      width:42px; height:42px; display:grid; place-items:center; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #ff8bbd, var(--accent)); color:#fff;
      box-shadow: 0 6px 14px rgba(255,105,180,.35);
      animation: pulse 1.4s infinite ease-in-out;
    }
    @keyframes pulse{ 0%,100%{ transform: scale(1)} 50%{ transform: scale(1.12)} }
    h1{ font-size: clamp(22px, 5vw, 34px); margin:0; font-weight:700; letter-spacing:.2px }
    p.lead{ margin: 2px 0 14px; opacity:.8 }

    /* Lock screen */
    .lock{ display:grid; gap:18px }

    .pin-dots{ display:flex; justify-content:center; gap:14px; margin:8px 0 10px }
    .dot{
      width:38px; height:38px; border-radius:12px; background:#fff; border:2px dashed #ffc2d9;
      display:grid; place-items:center; font-weight:700; color:#ff3d86; transition:.25s ease;
      box-shadow: inset 0 0 0 2px #fff, 0 4px 12px rgba(0,0,0,.08);
    }
    .dot.filled{ background: #ffebf3; border-color:#ff8bbd }

    .hidden-input{ position:absolute; opacity:0; pointer-events:none }

    .keypad{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; width:min(360px, 90%);
      margin-inline:auto }
    .key{
      background:#fff; border:2px solid #ffd6e5; border-radius:16px; padding:16px; text-align:center;
      font-size:22px; font-weight:700; cursor:pointer; user-select:none; transition:.2s;
      box-shadow: 0 6px 12px rgba(0,0,0,.06);
    }
    .key:hover{ transform: translateY(-2px) }
    .key:active{ transform: translateY(0) scale(.98) }
    .key.fn{ background:#ffe6f1 }

    .msg{ text-align:center; min-height:22px; font-weight:600 }
    .msg.ok{ color:var(--ok) }
    .msg.bad{ color:var(--bad); animation: shake .35s }
    @keyframes shake{ 10%, 90% { transform: translateX(-1px) } 20%, 80%{ transform: translateX(2px) }
      30%, 50%, 70%{ transform: translateX(-4px) } 40%, 60%{ transform: translateX(4px) } }

    /* Love page */
    .love{ display:none; }
    .love.show{ display:block; animation: fadeIn .6s ease }
    @keyframes fadeIn{ from{opacity:0; transform: translateY(8px)} to{opacity:1; transform: none} }

    .hero{
      display:grid; gap:8px; text-align:center; padding:6px 10px 12px
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
      background: #f9f2ff; border:1px solid #eadbff; font-weight:600; width:max-content; margin:0 auto
    }
    .typewriter{ min-height:40px; font-size: clamp(18px, 3.6vw, 22px) }

    .grid{
      display:grid; grid-template-columns: repeat( auto-fit, minmax(220px, 1fr) ); gap:14px; margin-top:18px
    }
    .tile{
      background:#fff; border:2px solid #ffe1ee; border-radius: 20px; padding:14px 14px 16px;
      box-shadow: 0 10px 20px rgba(0,0,0,.06);
    }
    .tile h3{ margin:2px 0 8px; font-size:18px }
    .tile p{ margin:0; opacity:.85 }
    .tile .btn{
      display:inline-flex; align-items:center; gap:8px; border:none; outline:none; cursor:pointer;
      background: linear-gradient(135deg, var(--accent), #ff9fd0);
      color:#fff; padding:10px 14px; border-radius:14px; font-weight:700; box-shadow: 0 8px 16px rgba(255,105,180,.25);
      transition:.2s; margin-top:10px
    }
    .tile .btn:hover{ transform: translateY(-1px) }

    .coupon{ display:grid; gap:8px }
    .coupon .tag{ font-size:13px; opacity:.75 }
    .coupon .big{ font-size: clamp(22px, 3.8vw, 28px); font-weight:800 }

    .counter b{ font-size:20px }

    .footer{ display:flex; justify-content:center; margin-top:12px; gap:10px; opacity:.8 }
    .footer button{
      background:#fff; border:2px dashed #ffd0e3; border-radius:14px; padding:8px 12px; font-weight:700; cursor:pointer
    }

    /* Pop heart burst */
    .burst{ position:fixed; inset:0; pointer-events:none }
    .burst i{ position:absolute; font-style:normal; animation: pop .7s ease-out forwards; }
    @keyframes pop{ to{ transform: translate(var(--dx), var(--dy)) scale(0.6) rotate(25deg); opacity:0 } }

    .sr-only{ position:absolute; width:1px; height:1px; padding:0; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
  </style>
</head>
<body>
  <div class="bg-hearts" aria-hidden="true" id="bgHearts"></div>
  <div class="burst" aria-hidden="true" id="burst"></div>

  <main class="wrap">
    <!-- LOCK CARD -->
    <section class="card lock" id="lockCard" aria-labelledby="lockTitle">
      <div class="title">
        <div class="heart">üíó</div>
        <h1 id="lockTitle">‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏ô</h1>
      </div>
      <p class="lead" style="text-align:center">‡∏£‡∏´‡∏±‡∏™ <b>‡∏≠‡∏∞‡πÑ‡∏£ ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡πÜ‡πÜ</b></p>

      <label class="sr-only" for="hiddenPin">‡∏õ‡πâ‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™ 4 ‡∏´‡∏•‡∏±‡∏Å</label>
      <input id="hiddenPin" class="hidden-input" inputmode="numeric" autocomplete="one-time-code" maxlength="4" />

      <div class="pin-dots" id="pinDots" role="status" aria-live="polite">
        <div class="dot" aria-hidden="true">‚ô°</div>
        <div class="dot" aria-hidden="true">‚ô°</div>
        <div class="dot" aria-hidden="true">‚ô°</div>
        <div class="dot" aria-hidden="true">‚ô°</div>
      </div>

      <div class="keypad" aria-label="‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î‡∏£‡∏´‡∏±‡∏™" id="keypad">
        <!-- keys will be injected by JS 1..9, del, 0, ok -->
      </div>

      <div class="msg" id="msg"></div>
    </section>

    <!-- LOVE PAGE -->
    <section class="card love" id="loveCard" aria-labelledby="loveTitle">
      <div class="title">
        <div class="heart">üíñ</div>
        <h1 id="loveTitle">Welcome nongpanpan</h1>
      </div>

      <div class="hero">
        <span class="badge">‡∏≠‡∏µ‡πÅ‡∏Å‡πà‡∏ö‡πâ‡∏≤‡∏ô‡πâ‡∏≥‡∏•‡∏≤‡∏¢</span>
        <div class="typewriter" id="typewriter"></div>
      </div>

      <div class="grid">
        <article class="tile">
          <h3>‡∏™‡∏∏‡πà‡∏°‡πÜ‡πÄ‡∏£‡πá‡∏ß</h3>
          <p id="sweetText">‡∏ô‡∏∏‡∏ä‡∏£‡∏±‡∏Å‡∏ô‡πâ‡∏≠‡∏á‡∏≠‡πâ‡∏ß‡∏ô‡∏≠‡πâ‡∏ß‡∏ô</p>
          <button class="btn" id="btnRandom">‡∏î‡∏µ‡∏Å‡∏±‡∏ô‡∏î‡∏µ‡∏Å‡∏±‡∏ô</button>
        </article>

        <article class="tile coupon">
          <div class="tag">‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏î‡∏µ‡∏ô‡∏∞‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
          <div class="big" id="coupon">‡∏Å‡∏≠‡∏î‡∏ü‡∏£‡∏µ 10 ‡∏ô‡∏≤‡∏ó‡∏µ ü§ó</div>
          <button class="btn" id="btnCoupon">‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
        </article>


      </div>

      <div class="footer">
        <button id="relock">‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
      </div>
    </section>
  </main>

  <script>
    // =====================
    // CONFIG
    // =====================
    const PASSCODE = '1708'; // ‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö
    const LS_UNLOCK = 'loveUnlocked1708';
    const LS_STARTDATE = 'loveStartDate';

    // =====================
    // Helpers
    // =====================
    const qs = (s, el=document) => el.querySelector(s);
    const qsa = (s, el=document) => [...el.querySelectorAll(s)];

    function heartBurst(x, y) {
      const burst = qs('#burst');
      for (let i=0;i<16;i++){
        const node = document.createElement('i');
        node.textContent = Math.random() < .75 ? 'üíñ' : (Math.random()<.5 ? 'üíó' : 'üíò');
        const dx = (Math.random()*2-1) * 140 + 'px';
        const dy = (Math.random()*-1) * (80 + Math.random()*120) + 'px';
        node.style.setProperty('--dx', dx);
        node.style.setProperty('--dy', dy);
        node.style.left = x + 'px';
        node.style.top = y + 'px';
        burst.appendChild(node);
        setTimeout(()=> node.remove(), 700);
      }
    }

    // floating bg hearts
    const bg = qs('#bgHearts');
    function spawnBgHeart(){
      const h = document.createElement('span');
      h.textContent = Math.random() < .6 ? '‚ô°' : '‚ù§';
      const size = 14 + Math.random()*20; // 14-34
      const left = Math.random()*100; // vw
      const dur = 8 + Math.random()*10; // 8-18s
      h.style.left = left + 'vw';
      h.style.fontSize = size + 'px';
      h.style.animationDuration = dur + 's';
      bg.appendChild(h);
      setTimeout(()=> h.remove(), dur*1000);
    }
    setInterval(spawnBgHeart, 800);
    for(let i=0;i<12;i++) setTimeout(spawnBgHeart, i*250);

    // =====================
    // Lock logic
    // =====================
    const pinInput = qs('#hiddenPin');
    const pinDots = qs('#pinDots');
    const msg = qs('#msg');
    const lockCard = qs('#lockCard');
    const loveCard = qs('#loveCard');

    // build keypad
    const keypad = qs('#keypad');
    const keys = ['1','2','3','4','5','6','7','8','9','‚å´','0','‚úì'];
    keys.forEach(k=>{
      const b = document.createElement('button');
      b.className = 'key' + (isNaN(Number(k))? ' fn':'');
      b.type = 'button';
      b.textContent = k;
      b.setAttribute('aria-label', `‡∏õ‡∏∏‡πà‡∏° ${k}`);
      b.addEventListener('click', ()=> handleKey(k));
      keypad.appendChild(b);
    });

    // dots update
    function renderDots(val){
      qsa('.dot', pinDots).forEach((d, i)=>{
        d.classList.toggle('filled', i < val.length);
        d.textContent = i < val.length ? '‚ù§' : '‚ô°';
      });
    }

    function handleKey(k){
      if(!isNaN(Number(k))){
        if(pinInput.value.length < 4){
          pinInput.value += k;
          renderDots(pinInput.value);
        }
      } else if(k==='‚å´'){
        pinInput.value = pinInput.value.slice(0,-1);
        renderDots(pinInput.value);
      } else if(k==='‚úì'){
        submitPin();
      }

      if(pinInput.value.length===4) submitPin();
    }

    function submitPin(){
      if(pinInput.value === PASSCODE){
        msg.textContent = '‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
        msg.className = 'msg ok';
        localStorage.setItem(LS_UNLOCK, '1');
        // tiny delay for feedback
        setTimeout(()=> unlock(), 250);
        const {x, y} = { x: window.innerWidth/2, y: window.innerHeight/2 };
        heartBurst(x, y);
      } else {
        msg.textContent = '‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ô‡πâ‡∏≤ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üí´';
        msg.className = 'msg bad';
        pinInput.value = '';
        renderDots('');
      }
    }

    function unlock(){
      lockCard.style.display = 'none';
      loveCard.classList.add('show');
    }
    function relock(){
      loveCard.classList.remove('show');
      loveCard.style.display = 'none';
      lockCard.style.display = '';
      msg.textContent='';
      msg.className='msg';
      pinInput.value='';
      renderDots('');
      localStorage.removeItem(LS_UNLOCK);
    }

    // keyboard support
    document.addEventListener('keydown', (e)=>{
      if(loveCard.classList.contains('show')) return;
      if(/^[0-9]$/.test(e.key)) handleKey(e.key);
      if(e.key==='Backspace') handleKey('‚å´');
      if(e.key==='Enter') handleKey('‚úì');
    });

    // restore unlocked state
    if(localStorage.getItem(LS_UNLOCK)==='1'){
      unlock();
    } else { pinInput.focus(); }

    // =====================
    // Love page logic
    // =====================
    const typewriterEl = qs('#typewriter');
    const sweetEl = qs('#sweetText');
    const btnRandom = qs('#btnRandom');
    const btnCoupon = qs('#btnCoupon');
    const couponEl = qs('#coupon');
    const relockBtn = qs('#relock');
    const popBtn = qs('#popHearts');

    const sweetTexts = [
      '‡∏£‡∏±‡∏Å‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ',
      '‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö‡∏ó‡∏≥‡∏ú‡∏¥‡∏î‡∏ö‡πà‡∏≠‡∏¢ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏à‡∏£‡∏¥‡∏á‡πÜ‡∏ô‡∏∞‡∏Ñ‡∏∞',
      '‡∏ô‡πâ‡∏≠‡∏á‡∏≠‡πâ‡∏ß‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏Å‡∏¥‡∏ô‡∏ô‡πâ‡∏≥‡πÇ‡∏Ñ‡πâ‡∏Å‡πÄ‡∏¢‡∏≠‡∏∞',
      '‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ',
      '‡∏Å‡∏≠‡∏î‡πÜ‡∏Å‡∏±‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞',
      '‡∏≠‡∏¢‡πà‡∏≤‡∏î‡πà‡∏≤‡∏ô‡∏∏‡∏ä‡πÄ‡∏¢‡∏≠‡∏∞ ‡πÉ‡∏à‡∏ô‡πâ‡∏≠‡∏¢',

    ];

    const coupons = [
      '‡πÑ‡∏õ‡∏´‡∏≤‡πÄ‡∏•‡∏¢',
      '‡∏û‡∏≤‡πÑ‡∏õ‡∏Å‡∏¥‡∏ô‡∏ä‡∏≤‡∏ö‡∏π',
      '‡πÄ‡∏¢‡πá‡∏î‡∏à‡∏ô‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï',
      '‡πÄ‡∏¢‡πá‡∏î‡∏à‡∏ô‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï',
      '‡πÄ‡∏¢‡πá‡∏î‡∏à‡∏ô‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï',
      '‡πÄ‡∏¢‡πá‡∏î‡∏à‡∏ô‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï',
      '‡πÄ‡∏¢‡πá‡∏î‡∏à‡∏ô‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï',
      '‡πÄ‡∏¢‡πá‡∏î‡∏à‡∏ô‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï',
      '‡πÄ‡∏¢‡πá‡∏î‡∏à‡∏ô‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï',
      '‡πÄ‡∏¢‡πá‡∏î‡∏à‡∏ô‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï'
    ];

    function rand(arr){ return arr[Math.floor(Math.random()*arr.length)] }

    btnRandom?.addEventListener('click', ()=>{
      sweetEl.textContent = rand(sweetTexts);
      heartBurst(window.innerWidth*0.7, window.innerHeight*0.25);
    });

    btnCoupon?.addEventListener('click', ()=>{
      couponEl.textContent = rand(coupons);
      heartBurst(window.innerWidth*0.3, window.innerHeight*0.25);
    });

    relockBtn?.addEventListener('click', ()=>{
      relock();
    });

    popBtn?.addEventListener('click', (e)=>{
      heartBurst(e.clientX || window.innerWidth/2, e.clientY || window.innerHeight/2);
    });

    // cute typewriter
    const message = '‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏°‡∏±‡πâ‡∏¢ ‡∏´‡∏¥‡∏´‡∏¥‡∏´‡∏¥‡∏´‡∏¥‡∏´‡∏¥‡∏´‡∏¥';
    function typewriter(txt){
      typewriterEl.textContent = '';
      let i=0;
      const timer = setInterval(()=>{
        typewriterEl.textContent += txt[i++];
        if(i>=txt.length) clearInterval(timer);
      }, 35);
    }

    // day counter from special date
    const startDateText = qs('#startDateText');
    const daysTogetherEl = qs('#daysTogether');
    const btnSetDate = qs('#btnSetDate');

    function getStartDate(){
      return localStorage.getItem(LS_STARTDATE) || '2024-08-17'; // ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡πÉ‡∏ö‡πâ 17/08)
    }
    function setStartDate(v){
      localStorage.setItem(LS_STARTDATE, v);
      renderDays();
    }
    function daysBetween(dStr){
      const start = new Date(dStr+'T00:00:00');
      const today = new Date();
      const diff = Math.floor((today - start) / (1000*60*60*24));
      return diff < 0 ? 0 : diff;
    }
    function renderDays(){
      const d = getStartDate();
      startDateText.textContent = d;
      daysTogetherEl.textContent = String(daysBetween(d));
    }

    btnSetDate?.addEventListener('click', ()=>{
      const v = prompt('‡πÉ‡∏™‡πà‡∏ß‡∏±‡∏ô (YYYY-MM-DD)', getStartDate());
      if(!v) return;
      if(/^\d{4}-\d{2}-\d{2}$/.test(v)) setStartDate(v);
      else alert('‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≤‡∏≤ (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 2025-08-17)');
    });

    // init love page when shown
    if(localStorage.getItem(LS_UNLOCK)==='1'){
      typewriter(message);
      renderDays();
    }

    // also trigger when user just unlocked
    const observer = new MutationObserver(()=>{
      if(loveCard.classList.contains('show')){
        typewriter(message);
        renderDays();
      }
    });
    observer.observe(loveCard, { attributes:true, attributeFilter:['class'] });

    // click anywhere to pop mini hearts (for fun)
    document.addEventListener('click', (e)=>{
      if(!loveCard.classList.contains('show')) return;
      // ignore UI buttons which already trigger
      if(e.target.closest('button')) return;
      heartBurst(e.clientX, e.clientY);
    });
  </script>
</body>
</html>
